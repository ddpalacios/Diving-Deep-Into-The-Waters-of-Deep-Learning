<html>
<title></title>

<script src="https://cdn.rawgit.com/BrainJS/brain.js/45ce6ffc/browser.js"></script>
  <script src="https://d3js.org/d3.v4.min.js"></script>
  <script src="https://d3js.org/d3-force.v2.min.js"></script>
  <script src="https://d3js.org/d3-dispatch.v1.min.js"></script>
  <script src="https://d3js.org/d3-quadtree.v1.min.js"></script>
  <script src="https://d3js.org/d3-timer.v1.min.js"></script>
  <script src="https://d3js.org/d3-force.v2.min.js"></script>
  <script src="https://d3js.org/d3.v3.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/2.3.0/mustache.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/lodash.js/4.17.4/lodash.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script src="//unpkg.com/brain.js"></script>
  <script src="https://d3js.org/d3.v2.min.js?2.9.3"></script>



<style>
    body {
 overflow: hidden;
}
.container{
    height: 100vh;
    width: 100vw;
    display: grid;
  grid-template-columns: 1fr;
  grid-template-rows: 30px 1fr 30px;
}

.body {
 display: grid;
 grid-template-columns: 1fr 3fr;
 overflow: hidden;
}

.content {
 overflow-y: scroll;
 padding: 20px;
 
}




.text {
  color: white;
  font-size: 16px;
  padding: 16px 32px;
}

.image {
  opacity: 1;
  display: block;
  width: 90%;
  height: auto;
  transition: .5s ease;
  backface-visibility: hidden;
}

.middle {
  transition: .5s ease;
  opacity: 0;
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  -ms-transform: translate(-50%, -50%);
  text-align: center;
}

body {
  padding: 20px;
  font-family: sans-serif;
  background: #f2f2f2;
}
img {
  width: 80vh; /* need to overwrite inline dimensions */
  height: 70vh;
  overflow:hidden
}
h2 {
  margin-bottom: .5em;
}
.grid-container {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(30vh, 1fr));
  grid-gap: 1em;

}



/* hover styles */
.location-listing {
  position: relative;
}

.location-image {
  line-height: 0;
  overflow: hidden;
}

.location-image img {
  filter: blur(0px);
  transition: filter 0.3s ease-in;
  transform: scale(1.1);
}

.location-title {
  font-size: 1.5em;
  font-weight: bold;
  text-decoration: none;
  z-index: 1;
  position: absolute;
  height: 100%;
  width: 100%;
  top: 0;
  left: 0;
  opacity: 0;
  transition: opacity .5s;
  background: rgba(90,0,10,0.4);
  color: white;
  
  /* position the text in tâ€™ middle*/
  display: flex;
  align-items: center;
  justify-content: center;
}

.location-listing:hover .location-title {
  opacity: 1;
}

.location-listing:hover .location-image img {
  filter: blur(2px);
}


/* for touch screen devices */
@media (hover: none) { 
  .location-title {
    opacity: 1;
  }
  .location-image img {
    filter: blur(2px);
  }
}

#footer{
position: relative;
bottom: 5px;
}

#footer ul{
    
    margin: 0px auto 0px auto;
    text-align: center;
}

#footer li{
    display: inline;
    margin: 0px 5px;
    color: rgb(75, 50, 50);
}

#footer a{
    color: rgb(44, 39, 75);
    bottom: -100px;
    text-decoration: none;
    font-weight: bolder;
}

#footer a:hover{
    color: rgb(255, 255, 255);
}


* {
  box-sizing: border-box;
}



label {
  text-align: right;
  display: block;
  padding: 0.5em 1.5em 0.5em 0;
}

input {
  width: 100%;
  padding: 0.7em;
  margin-bottom: 0.5rem;
}
input:focus {
  outline: 3px solid gold;
}

@media (min-width: 400px) {
  form {
    overflow: hidden;
  }

  label {
    float: left;
    width: 200px;
  }

  input {
    float: left;
    width: calc(100% - 200px);
  }

  button {
    float: right;
    width: calc(100% - 200px);
  }
}

button{
  width: 10vh;
}

text {
  pointer-events: none;
}

.node:hover {
  stroke: #999;
  stroke-opacity: .6;
  stroke-width: 4px;
}


.link {
  stroke: rgb(0, 0, 0);
  stroke-opacity: .6;
}
svg{
  outline:5px solid black;
  position: relative;
  width: 145vh;
  left: .5vh;
  height: 83vh;
  bottom: 0vh;
}
body{
  background-image: url('https://data.whicdn.com/images/262378523/original.gif');
}

</style>
<head></head>
<body>

<div style="background-color: rgb(153, 153, 153); outline: 5px solid black;width: 198vh; height: 10vh;" class="container">
<h1 style="position: relative; left: 1vh; bottom: 2vh; " >Welcome to The Playground</h1>
<a href="../index.html"> <h3 style="position: relative; left:1vh;">Return to Homepage</h3> </a>
</div>
  <div class="sidebar" style="outline: 6px solid black; background-color: rgb(84, 86, 131);width: 50vh; height: 83.2vh; position: relative; bottom: 1vh;">
      <h1 style=" font-size: 4vh; position: relative; left: 7vh; top: 3vh;">Design Your Model:</h1>
        </div> 
         <form style="background-color: aliceblue; height: 74vh; width: 50vh; position: relative; bottom: 75vh; outline: solid black;" class="form1" action="">
                 <div style="position: relative; top: 10vh; right: 5vh; ">
                  <label for="firstName" class="first-name"># Of Inputs:</label>
                  <input id="input_units" type="text">
                  <label for="lastName" class="last-name">Hidden Layers:</label>
                  <input id="hidden_units1" type="text">          
                  <label for="job">Hidden Units:</label>
                  <input id="hidden_units2" type="text">         
                  <label >Output Units:</label>
                  <input id="output_units" type="text">          
                  <label >Activation:</label>
                  <input id="activation" >          
                  <label >Learning Rate:</label>
                  <input id="learning_rate" type="text">         
                  <label >Iterations</label>
                  <input id="iterations" type="text">
                  <button type="button" onclick="Render()">Build</button>
                  <button type="button" onclick="Train()">Train</button>
                  <button onclick="test()">Reset</button>
                </div>
      </form>
          </div>


<div class="body_model" style=" background-color: rgb(224, 224, 224); position: relative;width: 146vh; left: 52vh; bottom: 160vh; height:83vh; outline: 5px solid black;"></div>
</body>


<script>




</script>



<script>
function extract_values(id){

var value = document.getElementById(id).value
return value


}
function Train(){

// provide optional config object (or undefined). Defaults shown.
const config = {
  binaryThresh: 0.5,
  hiddenLayers: [3], // array of ints for the sizes of the hidden layers in the network
  activation: 'sigmoid', // supported activation types: ['sigmoid', 'relu', 'leaky-relu', 'tanh'],
  leakyReluAlpha: 0.01, // supported for activation type 'leaky-relu'
}

// create a simple feed forward neural network with backpropagation
const net = new brain.NeuralNetwork(config)

net.train([
  { input: [0, 0], output: [0] },
  { input: [0, 1], output: [1] },
  { input: [1, 0], output: [1] },
  { input: [1, 1], output: [0] },
])

const output = net.run([1, 0]) // [0.987]
console.log(output)

}



function Render(){


  
var json =  [{

"nodes":[], 



}]
var hashmap = new Map()
var NODE_LIST = json[0].nodes
var values = []


in_value = extract_values("input_units")
h1_value = extract_values("hidden_units1")
h2_value = extract_values("hidden_units2")
out_value = extract_values("output_units")
console.log(in_value, h1_value, h2_value, out_value)
for (var i=0; i< in_value; i++){
NODE_LIST.push({"label": i, "layer": 0})
}
for (var i=0; i< h1_value; i++){
NODE_LIST.push({"label": i, "layer": 1})
}
for (var i=0; i< h2_value; i++){
NODE_LIST.push({"label": i, "layer": 2})
}

for (var i=0; i< out_value; i++){
NODE_LIST.push({"label": i, "layer": 3})
}

$(() => {
const tmpl = $('#item_template').html()
const container = $('#app');
console.log("clicked")
$('#renders_button').click(() => {
  addItem(container, tmpl, json);
})

container.on('click', '.del_el', (e) => {
  var val = document.getElementsByClassName('item')[0].getElementsByTagName('p')[0]
  var saved_arch = JSON.parse(val.innerText);
  console.log(saved_arch)
  new Create_Architecture(-1.5, -.1, saved_arch).build()


});
});


console.log(json)

if ($(".body_model").find("svg").length > 0){
  $("svg").remove()
  in_value = extract_values("input_units")
h1_value = extract_values("hidden_units1")
h2_value = extract_values("hidden_units2")
out_value = extract_values("output_units")
console.log(in_value, h1_value, h2_value, out_value)
for (var i=0; i< in_value; i++){
NODE_LIST.push({"label": i, "layer": 0})
}
for (var i=0; i< h1_value; i++){
NODE_LIST.push({"label": i, "layer": 1})
}
for (var i=0; i< h2_value; i++){
NODE_LIST.push({"label": i, "layer": 2})
}

for (var i=0; i< out_value; i++){
NODE_LIST.push({"label": i, "layer": 3})
}

$(() => {
const tmpl = $('#item_template').html()
const container = $('#app');
console.log("clicked")
$('#renders_button').click(() => {
  addItem(container, tmpl, json);
})

container.on('click', '.del_el', (e) => {
  var val = document.getElementsByClassName('item')[0].getElementsByTagName('p')[0]
  var saved_arch = JSON.parse(val.innerText);
  console.log(saved_arch)
  new Create_Architecture(-1.5, -.1, saved_arch).build()


});
});


  new Create_Architecture(x_pos = -1.5, y_pos = -1, json).build() 

  


}
else{
  new Create_Architecture(x_pos = -1.5, y_pos = -1, json).build() 

  }

}
</script>

<script>
  class Create_Architecture {
   constructor(x_pos, y_pos, json, width = 800, height = 400, nodeSize = 15) {
    // alert('testing')
     this.x_pos = x_pos
     this.y_pos = y_pos
     this.nodes = json[0].nodes;
     this.width = width
     this.height = height
     this.nodeSize = nodeSize
     this.color = d3.scale.category20()
     this.svg = d3.select(".body_model").append("svg")
       .attr("width", window.innerWidth)
       .attr("height",window.innerHeight);


   }
   _get_network_size() {
     // get network size
     var netsize = {};
     this.nodes.forEach(function (d) {
       if (d.layer in netsize) {
         netsize[d.layer] += 1;
       } else {
         netsize[d.layer] = 1;
       }
       d["lidx"] = netsize[d.layer];
     });

     // calc distances between nodes
     var largestLayerSize = Math.max.apply(
       null, Object.keys(netsize).map(function (i) { return netsize[i]; }));

     var xdist = this.width / Object.keys(netsize).length,
       ydist = this.height / largestLayerSize,
       x_pos = this.x_pos,
       y_pos = this.y_pos;
     // create node locations
     this.nodes.map(function (d) {

       d["x"] = (d.layer - x_pos) * xdist;
       d["y"] = (d.lidx - y_pos) * ydist;
     });


   }

   _autogenerate_links() {
     // autogenerate links
     var netsize = {}
     var links = [];
     var nodes = this.nodes;

     this.nodes.map(function (d, i) {
       for (var n in nodes) {
         if (d.layer + 1 == nodes[n].layer) {
           links.push({ "source": parseInt(i), "target": parseInt(n), "value": 1 })
         }

       }

     }).filter(function (d) { return typeof d !== "undefined"; });


     this._draw_links(links)
   }

   _draw_links(links) {
     // draw links
     var nodes = this.nodes
     var link = this.svg.selectAll(".link")
       .data(links)
       .enter().append("line")
       .attr("class", "link")
       .attr("x1", function (d) { return nodes[d.source].x; })
       .attr("y1", function (d) { return nodes[d.source].y; })
       .attr("x2", function (d) { return nodes[d.target].x; })
       .attr("y2", function (d) { return nodes[d.target].y; })
       .style("stroke-width", function (d) { return Math.sqrt(d.value); });



   }


   clear_contents(){
     this.svg.selectAll("*").remove()

   }
   _draw_nodes() {
     var color = this.color
     // draw nodes
     var node = this.svg.selectAll(".node")
       .data(this.nodes)
       .enter().append("g")
       .attr("transform", function (d) {
         return "translate(" + d.x + "," + d.y + ")";
       }
       );

     var circle = node.append("circle")
       .attr("class", "node")
       .attr("r", this.nodeSize)
       .style("fill", function (d) { return color(d.layer); });


     node.append("text")
       .attr("dx", "-.35em")
       .attr("dy", ".35em")
       .text(function (d) { return d.label; });
   }
   build() {

     this._get_network_size()
     this._autogenerate_links()
     this._draw_nodes()



   }}



// function Render(){

//    var json3 = [{
//     "nodes": [
//       { "label": "i0", "layer": 0 },
//       { "label": "i0", "layer": 0 },
//       { "label": "i0", "layer": 0 },
//       { "label": "i1", "layer": 1 },
//       { "label": "i2", "layer": 1 },
//       { "label": "h0", "layer": 2 },

//       { "label": "h1", "layer": 2 },
//       { "label": "h2", "layer": 2 },
     
//       { "label": "o0", "layer": 3 },
//       { "label": "o0", "layer": 3 }
     
//     ]
//   }]

// console.log(json3)
// new Create_Architecture(x_pos = -1.5, y_pos = .1, json3).build()


// }

</script>


</html>